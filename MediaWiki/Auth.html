<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: MediaWiki::Auth
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!MediaWiki/Auth.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (A)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../MediaWiki.html" title="MediaWiki (module)">MediaWiki</a></span></span>
     &raquo; 
    <span class="title">Auth</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Module: MediaWiki::Auth
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
    <dt class="r1">Included in:</dt>
    <dd class="r1"><span class='object_link'><a href="Butt.html" title="MediaWiki::Butt (class)">Butt</a></span></dd>
    
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/mediawiki/auth.rb</dd>
  
</dl>
<div class="clear"></div>








  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_create-instance_method" title="#check_create (instance method)">- (void) <strong>check_create</strong>(error) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Checks the account creation result&#39;s error and raises the corresponding exception.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_login-instance_method" title="#check_login (instance method)">- (Boolean) <strong>check_login</strong>(result, secondtry) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Checks the login result for errors and raises errors accordingly.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_account-instance_method" title="#create_account (instance method)">- (Boolean) <strong>create_account</strong>(username, password, language = &#39;en&#39;, reason = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates an account using the standard procedure.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_account_email-instance_method" title="#create_account_email (instance method)">- (Boolean) <strong>create_account_email</strong>(username, email, language = &#39;en&#39;, reason = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates an account using the random password sent by email procedure.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#login-instance_method" title="#login (instance method)">- (Boolean) <strong>login</strong>(username, password) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Logs the user into the wiki.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#logout-instance_method" title="#logout (instance method)">- (Boolean) <strong>logout</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Logs the current user out.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="check_create-instance_method">
  
    - (<tt>void</tt>) <strong>check_create</strong>(error) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Checks the account creation result&#39;s error and raises the corresponding exception.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>error</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The parsed error code string</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>NoNameError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When the username was either not provided or is invalid.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>UserExistsError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When the username is already in use.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>UserPassMatchError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When the username and password are identical.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>PasswordLoginForbiddenError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When the use of the username and password has been forbidden.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>NoEmailTitleError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When there is no provided email address.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>InvalidEmailAddressError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When the email address has an invalid format.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>PasswordTooShortError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When the password is shorter than the $wgMinimumPasswordLength option.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>NoEmailError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When there is no email address set for the user.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>ThrottledError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When the user has created too many accounts in one day.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>AbortedError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When an extension has aborted this action.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>BlockedError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When the IP or logged in user is blocked.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>PermDeniedError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When the user does not have the right to create accounts.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>HookAbortedError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Same as AbortedError.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.1.1</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mediawiki/auth.rb', line 66</span>

<span class='kw'>def</span> <span class='id identifier rubyid_check_create'>check_create</span><span class='lparen'>(</span><span class='id identifier rubyid_error'>error</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_error'>error</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>noname</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='const'>MediaWiki</span><span class='op'>::</span><span class='const'>Butt</span><span class='op'>::</span><span class='const'>NoNameError</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>userexists</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='const'>MediaWiki</span><span class='op'>::</span><span class='const'>Butt</span><span class='op'>::</span><span class='const'>UserExistsError</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>password-name-match</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='const'>MediaWiki</span><span class='op'>::</span><span class='const'>Butt</span><span class='op'>::</span><span class='const'>UserPassMatchError</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>password-login-forbidden</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='const'>MediaWiki</span><span class='op'>::</span><span class='const'>Butt</span><span class='op'>::</span><span class='const'>PasswordLoginForbiddenError</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>noemailtitle</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='const'>MediaWiki</span><span class='op'>::</span><span class='const'>Butt</span><span class='op'>::</span><span class='const'>NoEmailTitleError</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>invalidemailaddress</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='const'>MediaWiki</span><span class='op'>::</span><span class='const'>Butt</span><span class='op'>::</span><span class='const'>InvalidEmailAddressError</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>passwordtooshort</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='const'>MediaWiki</span><span class='op'>::</span><span class='const'>Butt</span><span class='op'>::</span><span class='const'>PasswordTooShortError</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>noemail</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='const'>MediaWiki</span><span class='op'>::</span><span class='const'>Butt</span><span class='op'>::</span><span class='const'>NoEmailError</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>acct_creation_throttle_hit</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='const'>MediaWiki</span><span class='op'>::</span><span class='const'>Butt</span><span class='op'>::</span><span class='const'>ThrottledError</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>aborted</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='const'>MediaWiki</span><span class='op'>::</span><span class='const'>Butt</span><span class='op'>::</span><span class='const'>AbortedError</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>blocked</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='const'>MediaWiki</span><span class='op'>::</span><span class='const'>Butt</span><span class='op'>::</span><span class='const'>BlockedError</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>permdenied-createaccount</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='const'>MediaWiki</span><span class='op'>::</span><span class='const'>Butt</span><span class='op'>::</span><span class='const'>PermDeniedError</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>createaccount-hook-aborted</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='const'>MediaWiki</span><span class='op'>::</span><span class='const'>Butt</span><span class='op'>::</span><span class='const'>HookAbortedError</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="check_login-instance_method">
  
    - (<tt>Boolean</tt>) <strong>check_login</strong>(result, secondtry) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Checks the login result for errors and raises errors accordingly.
is already blocked.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>result</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The parsed version of the result.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>secondtry</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Whether this login is the first or second try. False for first, true for second.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>true if successful. Does not return anything otherwise.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>NeedTokenMoreThanOnceError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When secondtry is true and the wiki still returns &#39;NeedToken&#39;</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>NoNameError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When the username is nil or undefined.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>IllegalUsernameError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When the username is illegal.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>UsernameNotExistsError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When the username does not exist.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>EmptyPassError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When the password is nil or undefined.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>WrongPassError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When the password is incorrect.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>WrongPluginPassError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When an authentication plugin, not MediaWiki, claims that the password is incorrect.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>CreateBlockedError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When the wiki tries to automatically create an account, but the user&#39;s IP address</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>ThrottledError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When the user has logged in, or tried to, too much in a particular amount of time.</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>BlockedError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When the user is blocked from the wiki.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.1.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mediawiki/auth.rb', line 21</span>

<span class='kw'>def</span> <span class='id identifier rubyid_check_login'>check_login</span><span class='lparen'>(</span><span class='id identifier rubyid_result'>result</span><span class='comma'>,</span> <span class='id identifier rubyid_secondtry'>secondtry</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_result'>result</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Success</span><span class='tstring_end'>&#39;</span></span>
    <span class='ivar'>@logged_in</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>return</span> <span class='kw'>true</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>NeedToken</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='const'>MediaWiki</span><span class='op'>::</span><span class='const'>Butt</span><span class='op'>::</span><span class='const'>NeedTokenMoreThanOnceError</span> <span class='kw'>if</span> <span class='id identifier rubyid_secondtry'>secondtry</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>NoName</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='const'>MediaWiki</span><span class='op'>::</span><span class='const'>Butt</span><span class='op'>::</span><span class='const'>NoNameError</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Illegal</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='const'>MediaWiki</span><span class='op'>::</span><span class='const'>Butt</span><span class='op'>::</span><span class='const'>IllegalUsernameError</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>NotExists</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='const'>MediaWiki</span><span class='op'>::</span><span class='const'>Butt</span><span class='op'>::</span><span class='const'>UsernameNotExistsError</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>EmptyPass</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='const'>MediaWiki</span><span class='op'>::</span><span class='const'>Butt</span><span class='op'>::</span><span class='const'>EmptyPassError</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>WrongPass</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='const'>MediaWiki</span><span class='op'>::</span><span class='const'>Butt</span><span class='op'>::</span><span class='const'>WrongPassError</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>WrongPluginPass</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='const'>MediaWiki</span><span class='op'>::</span><span class='const'>Butt</span><span class='op'>::</span><span class='const'>WrongPluginPassError</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>CreateBlocked</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='const'>MediaWiki</span><span class='op'>::</span><span class='const'>Butt</span><span class='op'>::</span><span class='const'>CreateBlockedError</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Throttled</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='const'>MediaWiki</span><span class='op'>::</span><span class='const'>Butt</span><span class='op'>::</span><span class='const'>ThrottledError</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Blocked</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='const'>MediaWiki</span><span class='op'>::</span><span class='const'>Butt</span><span class='op'>::</span><span class='const'>BlockedError</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_account-instance_method">
  
    - (<tt>Boolean</tt>) <strong>create_account</strong>(username, password, language = &#39;en&#39;, reason = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates an account using the standard procedure.
Use the language code, not the name.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>username</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The desired username.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>password</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The desired password.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>language</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;en&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The language code to be set as default for the account. Defaults to &#39;en&#39;, or English.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>reason</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The reason for creating the account, as shown in the account creation log. Optional.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>True if successful, false if not.</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#check_create-instance_method" title="MediaWiki::Auth#check_create (method)">#check_create</a></span></li>
    
      <li><a href="https://www.mediawiki.org/wiki/API:Account_creation" target="_parent" title="MediaWiki Account Creation Docs">MediaWiki Account Creation Docs</a></li>
    
  </ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.1.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mediawiki/auth.rb', line 165</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_account'>create_account</span><span class='lparen'>(</span><span class='id identifier rubyid_username'>username</span><span class='comma'>,</span> <span class='id identifier rubyid_password'>password</span><span class='comma'>,</span> <span class='id identifier rubyid_language'>language</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>en</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_reason'>reason</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>name:</span> <span class='id identifier rubyid_username'>username</span><span class='comma'>,</span>
    <span class='label'>password:</span> <span class='id identifier rubyid_password'>password</span><span class='comma'>,</span>
    <span class='label'>language:</span> <span class='id identifier rubyid_language'>language</span><span class='comma'>,</span>
    <span class='label'>token:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='rbrace'>}</span>
  <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:reason</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_reason'>reason</span> <span class='kw'>unless</span> <span class='id identifier rubyid_reason'>reason</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>error</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_check_create'>check_create</span><span class='lparen'>(</span><span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>error</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>code</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>createaccount</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>result</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Success</span><span class='tstring_end'>&#39;</span></span>
    <span class='ivar'>@tokens</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>

    <span class='kw'>true</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>createaccount</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>result</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>NeedToken</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> <span class='lbrace'>{</span>
      <span class='label'>name:</span> <span class='id identifier rubyid_username'>username</span><span class='comma'>,</span>
      <span class='label'>password:</span> <span class='id identifier rubyid_password'>password</span><span class='comma'>,</span>
      <span class='label'>reason:</span> <span class='id identifier rubyid_reason'>reason</span><span class='comma'>,</span>
      <span class='label'>language:</span> <span class='id identifier rubyid_language'>language</span><span class='comma'>,</span>
      <span class='label'>token:</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>createaccount</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>token</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='rbrace'>}</span>

    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>error</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='id identifier rubyid_check_create'>check_create</span><span class='lparen'>(</span><span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>error</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>code</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='kw'>return</span> <span class='kw'>false</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>createaccount</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>result</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Success</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>return</span> <span class='kw'>true</span>
    <span class='kw'>else</span>
      <span class='kw'>return</span> <span class='kw'>false</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_account_email-instance_method">
  
    - (<tt>Boolean</tt>) <strong>create_account_email</strong>(username, email, language = &#39;en&#39;, reason = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates an account using the random password sent by email procedure.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>email</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The desired email address</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>username</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The desired username.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>password</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The desired password.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>language</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;en&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The language code to be set as default for the account. Defaults to &#39;en&#39;, or English.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>reason</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The reason for creating the account, as shown in the account creation log. Optional.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>True if successful, false if not.</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#check_create-instance_method" title="MediaWiki::Auth#check_create (method)">#check_create</a></span></li>
    
      <li><a href="https://www.mediawiki.org/wiki/API:Account_creation" target="_parent" title="MediaWiki Account Creation Docs">MediaWiki Account Creation Docs</a></li>
    
  </ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.1.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mediawiki/auth.rb', line 212</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_account_email'>create_account_email</span><span class='lparen'>(</span><span class='id identifier rubyid_username'>username</span><span class='comma'>,</span> <span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_language'>language</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>en</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_reason'>reason</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>name:</span> <span class='id identifier rubyid_username'>username</span><span class='comma'>,</span>
    <span class='label'>email:</span> <span class='id identifier rubyid_email'>email</span><span class='comma'>,</span>
    <span class='label'>mailpassword:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>value</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='label'>language:</span> <span class='id identifier rubyid_language'>language</span><span class='comma'>,</span>
    <span class='label'>token:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='rbrace'>}</span>
  <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:reason</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_reason'>reason</span> <span class='kw'>unless</span> <span class='id identifier rubyid_reason'>reason</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>error</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_check_create'>check_create</span><span class='lparen'>(</span><span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>error</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>code</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>createaccount</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>result</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Success</span><span class='tstring_end'>&#39;</span></span>
    <span class='ivar'>@tokens</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>

    <span class='kw'>true</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>createaccount</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>result</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>NeedToken</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> <span class='lbrace'>{</span>
      <span class='label'>name:</span> <span class='id identifier rubyid_username'>username</span><span class='comma'>,</span>
      <span class='label'>email:</span> <span class='id identifier rubyid_email'>email</span><span class='comma'>,</span>
      <span class='label'>mailpassword:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>value</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
      <span class='label'>reason:</span> <span class='id identifier rubyid_reason'>reason</span><span class='comma'>,</span>
      <span class='label'>language:</span> <span class='id identifier rubyid_language'>language</span><span class='comma'>,</span>
      <span class='label'>token:</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>createaccount</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>token</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='rbrace'>}</span>

    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>error</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='id identifier rubyid_check_create'>check_create</span><span class='lparen'>(</span><span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>error</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>code</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='kw'>return</span> <span class='kw'>false</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>createaccount</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>result</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Success</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>return</span> <span class='kw'>true</span>
    <span class='kw'>else</span>
      <span class='kw'>return</span> <span class='kw'>false</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="login-instance_method">
  
    - (<tt>Boolean</tt>) <strong>login</strong>(username, password) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Logs the user into the wiki. This is generally required for editing and getting restricted data.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>username</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The username</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>password</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The password</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>True if the login was successful, false if not.</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#check_login-instance_method" title="MediaWiki::Auth#check_login (method)">#check_login</a></span></li>
    
      <li><a href="https://www.mediawiki.org/wiki/API:Login" target="_parent" title="MediaWiki Login API Docs">MediaWiki Login API Docs</a></li>
    
  </ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.1.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mediawiki/auth.rb', line 104</span>

<span class='kw'>def</span> <span class='id identifier rubyid_login'>login</span><span class='lparen'>(</span><span class='id identifier rubyid_username'>username</span><span class='comma'>,</span> <span class='id identifier rubyid_password'>password</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>action:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>login</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='label'>lgname:</span> <span class='id identifier rubyid_username'>username</span><span class='comma'>,</span>
    <span class='label'>lgpassword:</span> <span class='id identifier rubyid_password'>password</span>
  <span class='rbrace'>}</span>

  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_check_login'>check_login</span><span class='lparen'>(</span><span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>login</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>result</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
    <span class='ivar'>@logged_in</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>true</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>login</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>result</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>NeedToken</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&amp;&amp;</span>
        <span class='op'>!</span><span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>login</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>token</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_token'>token</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>login</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>token</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_token_params'>token_params</span> <span class='op'>=</span> <span class='lbrace'>{</span>
      <span class='label'>action:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>login</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
      <span class='label'>lgname:</span> <span class='id identifier rubyid_username'>username</span><span class='comma'>,</span>
      <span class='label'>lgpassword:</span> <span class='id identifier rubyid_password'>password</span><span class='comma'>,</span>
      <span class='label'>lgtoken:</span> <span class='id identifier rubyid_token'>token</span>
    <span class='rbrace'>}</span>

    <span class='comment'># Consider refactor the @cookie initialization.
</span>    <span class='ivar'>@cookie</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>login</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cookieprefix</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>Session=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>login</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sessionid</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='id identifier rubyid_token_params'>token_params</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Set-Cookie</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='ivar'>@cookie</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_check'>check</span> <span class='op'>=</span> <span class='id identifier rubyid_check_login'>check_login</span><span class='lparen'>(</span><span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>login</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>result</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='ivar'>@name</span> <span class='op'>=</span> <span class='id identifier rubyid_username'>username</span> <span class='kw'>if</span> <span class='id identifier rubyid_check'>check</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_check'>check</span>
  <span class='kw'>end</span>

  <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="logout-instance_method">
  
    - (<tt>Boolean</tt>) <strong>logout</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Logs the current user out.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>True if it was able to log anyone out, false if not.</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://www.mediawiki.org/wiki/API:Logout" target="_parent" title="MediaWiki Logout API Docs">MediaWiki Logout API Docs</a></li>
    
  </ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.1.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


140
141
142
143
144
145
146
147
148
149
150
151
152
153</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mediawiki/auth.rb', line 140</span>

<span class='kw'>def</span> <span class='id identifier rubyid_logout'>logout</span>
  <span class='kw'>if</span> <span class='ivar'>@logged_in</span>
    <span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> <span class='lbrace'>{</span>
      <span class='label'>action:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>logout</span><span class='tstring_end'>&#39;</span></span>
    <span class='rbrace'>}</span>

    <span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='rparen'>)</span>
    <span class='ivar'>@logged_in</span> <span class='op'>=</span> <span class='kw'>false</span>

    <span class='kw'>true</span>
  <span class='kw'>else</span>
    <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Wed Jun 15 15:03:58 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.3.0).
</div>

  </body>
</html>